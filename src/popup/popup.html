<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSimplify Pro - Accessibility-First Content Simplification</title>
    <link rel="stylesheet" href="../styles/popup.css">
</head>
<body role="application" aria-label="WebSimplify Pro Extension">
    <!-- Skip Links for Screen Readers -->
    <div class="skip-links">
        <a href="#main-controls" class="skip-link">Skip to main controls</a>
        <a href="#quick-actions" class="skip-link">Skip to quick actions</a>
        <a href="#stats" class="skip-link">Skip to statistics</a>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header" role="banner">
            <div class="logo">
                <img src="../../assets/icons/icon-32.png" alt="WebSimplify Pro Logo" class="logo-icon">
                <h1 class="title">WebSimplify Pro</h1>
            </div>
            <div class="complexity-indicator" id="complexityIndicator" role="status" aria-live="polite">
                <span class="complexity-score" id="complexityScore" aria-label="Current page complexity score">--</span>
                <span class="complexity-label">Complexity</span>
            </div>
        </header>

        <!-- Main Controls -->
        <main class="main-controls" id="main-controls" role="main">
            <!-- Primary Action Button -->
            <button class="simplify-btn" id="simplifyBtn" 
                    aria-describedby="simplify-description"
                    aria-keyshortcuts="Alt+S">
                <span class="btn-icon" aria-hidden="true">üß†</span>
                <span class="btn-text">Simplify Page</span>
            </button>
            <div id="simplify-description" class="sr-only">
                Simplifies the current page content for easier reading. Keyboard shortcut: Alt+S
            </div>

            <!-- Simplification Level Slider -->
            <div class="level-control" id="levelControl" style="display: none;">
                <label class="level-label">Simplification Level</label>
                <div class="slider-container">
                    <input type="range" class="level-slider" id="levelSlider" min="1" max="3" value="2">
                    <div class="slider-labels">
                        <span>Basic</span>
                        <span>Medium</span>
                        <span>Advanced</span>
                    </div>
                </div>
            </div>

            <!-- Reading Time Estimator -->
            <div class="reading-time" id="readingTime" style="display: none;">
                <div class="time-before">
                    <span class="time-label">Original:</span>
                    <span class="time-value" id="timeBefore">--</span>
                </div>
                <div class="time-after">
                    <span class="time-label">Simplified:</span>
                    <span class="time-value" id="timeAfter">--</span>
                </div>
                <div class="time-saved">
                    <span class="saved-label">Time Saved:</span>
                    <span class="saved-value" id="timeSaved">--</span>
                </div>
            </div>
        </main>

        <!-- Quick Actions -->
        <div class="quick-actions" id="quick-actions" style="display: none;" role="group" aria-labelledby="quick-actions-label">
            <h2 id="quick-actions-label" class="sr-only">Quick Actions</h2>
            
            <button class="action-btn" id="splitViewBtn" 
                    aria-describedby="split-view-description"
                    aria-pressed="false">
                <span class="btn-icon" aria-hidden="true">‚öñÔ∏è</span>
                <span class="btn-text">Split View</span>
            </button>
            <div id="split-view-description" class="sr-only">
                Shows original and simplified content side by side for comparison
            </div>
            
            <button class="action-btn" id="heatmapBtn" 
                    aria-describedby="heatmap-description"
                    aria-pressed="false"
                    aria-keyshortcuts="Alt+H">
                <span class="btn-icon" aria-hidden="true">üî•</span>
                <span class="btn-text">Heatmap</span>
            </button>
            <div id="heatmap-description" class="sr-only">
                Displays visual complexity heatmap overlay. Keyboard shortcut: Alt+H
            </div>
            
            <button class="action-btn" id="learningBtn" 
                    aria-describedby="learning-description">
                <span class="btn-icon" aria-hidden="true">üéì</span>
                <span class="btn-text">Learn Mode</span>
            </button>
            <div id="learning-description" class="sr-only">
                Opens interactive learning mode to understand simplification techniques
            </div>
            
            <button class="action-btn" id="profileBtn" 
                    aria-describedby="profile-description">
                <span class="btn-icon" aria-hidden="true">üë§</span>
                <span class="btn-text">Profile</span>
            </button>
            <div id="profile-description" class="sr-only">
                Configure user profile and simplification preferences
            </div>
            
            <button class="action-btn" id="batchBtn" 
                    aria-describedby="batch-description">
                <span class="btn-icon" aria-hidden="true">üìë</span>
                <span class="btn-text">Batch</span>
            </button>
            <div id="batch-description" class="sr-only">
                Process multiple browser tabs simultaneously
            </div>
            
            <button class="action-btn" id="exportBtn" 
                    aria-describedby="export-description">
                <span class="btn-icon" aria-hidden="true">üíæ</span>
                <span class="btn-text">Export</span>
            </button>
            <div id="export-description" class="sr-only">
                Export simplified content in various formats
            </div>
            
            <button class="action-btn" id="resetBtn" 
                    aria-describedby="reset-description"
                    aria-keyshortcuts="Alt+R">
                <span class="btn-icon" aria-hidden="true">‚Ü∫</span>
                <span class="btn-text">Reset</span>
            </button>
            <div id="reset-description" class="sr-only">
                Reset page to original content. Keyboard shortcut: Alt+R
            </div>
        </div>

        <!-- Status Messages -->
        <div class="status-message" id="statusMessage"></div>

        <!-- Footer -->
        <footer class="footer">
            <div class="stats" id="stats" style="display: none;">
                <div class="stat-grid">
                    <div class="stat-item">
                        <span class="stat-value" id="pagesSimplified">0</span>
                        <span class="stat-label">pages simplified</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="timeSavedTotal">0</span>
                        <span class="stat-label">minutes saved</span>
                    </div>
                </div>
                <div class="footer-buttons">
                    <button class="dashboard-btn" id="dashboardBtn">
                        <span class="btn-icon">üìä</span>
                        <span class="btn-text">Dashboard</span>
                    </button>
                    <button class="help-btn" id="helpBtn">
                        <span class="btn-icon">‚ùì</span>
                        <span class="btn-text">Help</span>
                    </button>
                </div>
            </div>
        </footer>

        <!-- Performance Dashboard Modal -->
        <div class="dashboard-modal" id="dashboardModal" style="display: none;">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Performance Dashboard</h2>
                    <button class="modal-close" id="closeDashboard">√ó</button>
                </div>
                <div class="dashboard-content">
                    <div class="dashboard-section">
                        <h3>Usage Statistics</h3>
                        <div class="stats-grid">
                            <div class="dashboard-stat">
                                <div class="stat-number" id="dashTotalPages">0</div>
                                <div class="stat-description">Pages Simplified</div>
                            </div>
                            <div class="dashboard-stat">
                                <div class="stat-number" id="dashTotalTime">0</div>
                                <div class="stat-description">Minutes Saved</div>
                            </div>
                            <div class="dashboard-stat">
                                <div class="stat-number" id="dashAvgComplexity">0</div>
                                <div class="stat-description">Avg Complexity</div>
                            </div>
                            <div class="dashboard-stat">
                                <div class="stat-number" id="dashAvgReduction">0%</div>
                                <div class="stat-description">Avg Reduction</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-section">
                        <h3>Domain Analysis</h3>
                        <div class="domain-stats" id="domainStats">
                            <!-- Domain statistics will be populated here -->
                        </div>
                    </div>
                    
                    <div class="dashboard-section">
                        <h3>Recent Activity</h3>
                        <div class="activity-list" id="activityList">
                            <!-- Recent activity will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Batch Processing Modal -->
        <div class="batch-modal" id="batchModal" style="display: none;">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Batch Processing</h2>
                    <button class="modal-close" id="closeBatch">√ó</button>
                </div>
                <div class="batch-content">
                    <div class="batch-section">
                        <h3>Select Tabs to Simplify</h3>
                        <div class="tab-list" id="tabList">
                            <!-- Tabs will be populated here -->
                        </div>
                    </div>
                    <div class="batch-controls">
                        <div class="batch-options">
                            <label class="option-label">
                                <input type="checkbox" id="selectAllTabs"> Select All
                            </label>
                            <div class="level-selector">
                                <label>Simplification Level:</label>
                                <select id="batchLevel">
                                    <option value="1">Basic</option>
                                    <option value="2" selected>Medium</option>
                                    <option value="3">Advanced</option>
                                </select>
                            </div>
                        </div>
                        <div class="batch-actions">
                            <button class="btn-secondary" id="cancelBatch">Cancel</button>
                            <button class="btn-primary" id="startBatch">Start Processing</button>
                        </div>
                    </div>
                    <div class="batch-progress" id="batchProgress" style="display: none;">
                        <div class="progress-header">
                            <h3>Processing Tabs...</h3>
                            <span class="progress-counter" id="progressCounter">0/0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="current-tab" id="currentTab">Preparing...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Export Modal -->
        <div class="export-modal" id="exportModal" style="display: none;">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Export & Share Simplified Content</h2>
                    <button class="modal-close" id="closeExport">√ó</button>
                </div>
                <div class="export-content">
                    <div class="export-tabs">
                        <button class="tab-btn active" data-tab="export">üìÑ Export</button>
                        <button class="tab-btn" data-tab="share">üîó Share</button>
                    </div>
                    
                    <div class="tab-content" id="export-tab">
                        <div class="export-options">
                            <div class="export-format">
                                <h3>Export Format</h3>
                                <div class="format-options">
                                    <label class="format-option">
                                        <input type="radio" name="exportFormat" value="pdf" checked>
                                        <span class="format-icon">üìÑ</span>
                                        <span class="format-name">PDF Document</span>
                                    </label>
                                    <label class="format-option">
                                        <input type="radio" name="exportFormat" value="html">
                                        <span class="format-icon">üåê</span>
                                        <span class="format-name">HTML File</span>
                                    </label>
                                    <label class="format-option">
                                        <input type="radio" name="exportFormat" value="txt">
                                        <span class="format-icon">üìù</span>
                                        <span class="format-name">Plain Text</span>
                                    </label>
                                    <label class="format-option">
                                        <input type="radio" name="exportFormat" value="markdown">
                                        <span class="format-icon">üìã</span>
                                        <span class="format-name">Markdown</span>
                                    </label>
                                    <label class="format-option">
                                        <input type="radio" name="exportFormat" value="docx">
                                        <span class="format-icon">üìÑ</span>
                                        <span class="format-name">Word Document</span>
                                    </label>
                                    <label class="format-option">
                                        <input type="radio" name="exportFormat" value="epub">
                                        <span class="format-icon">üìö</span>
                                        <span class="format-name">EPUB eBook</span>
                                    </label>
                                </div>
                            </div>
                            <div class="export-settings">
                                <h3>Export Settings</h3>
                                <label class="setting-option">
                                    <input type="checkbox" id="includeOriginal" checked>
                                    Include original text comparison
                                </label>
                                <label class="setting-option">
                                    <input type="checkbox" id="includeMetrics" checked>
                                    Include reading time metrics
                                </label>
                                <label class="setting-option">
                                    <input type="checkbox" id="includeTimestamp" checked>
                                    Include timestamp and URL
                                </label>
                                <label class="setting-option">
                                    <input type="checkbox" id="includeImages" checked>
                                    Include images and media
                                </label>
                                <label class="setting-option">
                                    <input type="checkbox" id="preserveFormatting" checked>
                                    Preserve original formatting
                                </label>
                                <label class="setting-option">
                                    <input type="checkbox" id="accessibilityMode" checked>
                                    Accessibility-optimized output
                                </label>
                            </div>
                        </div>
                        <div class="export-actions">
                            <button class="export-btn" id="startExport">üì• Export Content</button>
                            <button class="cancel-btn" id="cancelExport">Cancel</button>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="share-tab" style="display: none;">
                        <div class="share-options">
                            <h3>Quick Share</h3>
                            <div class="share-buttons">
                                <button class="share-btn" id="shareEmail">
                                    <span class="share-icon">üìß</span>
                                    <span class="share-text">Email</span>
                                </button>
                                <button class="share-btn" id="shareClipboard">
                                    <span class="share-icon">üìã</span>
                                    <span class="share-text">Copy to Clipboard</span>
                                </button>
                                <button class="share-btn" id="shareSocial">
                                    <span class="share-icon">üîó</span>
                                    <span class="share-text">Social Media</span>
                                </button>
                                <button class="share-btn" id="sharePrint">
                                    <span class="share-icon">üñ®Ô∏è</span>
                                    <span class="share-text">Print</span>
                                </button>
                            </div>
                            
                            <div class="share-settings">
                                <h3>Share Format</h3>
                                <label class="setting-option">
                                    <input type="radio" name="shareFormat" value="text" checked>
                                    Plain text summary
                                </label>
                                <label class="setting-option">
                                    <input type="radio" name="shareFormat" value="markdown">
                                    Markdown with formatting
                                </label>
                                <label class="setting-option">
                                    <input type="radio" name="shareFormat" value="html">
                                    Rich HTML content
                                </label>
                            </div>
                            
                            <div class="share-preview">
                                <h3>Share Preview</h3>
                                <div class="preview-content" id="sharePreview">
                                    <p>Select a sharing option to see preview...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                    <div class="export-actions">
                        <button class="btn-secondary" id="cancelExport">Cancel</button>
                        <button class="btn-primary" id="startExport">Export Content</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Help Modal -->
        <div class="help-modal" id="helpModal" style="display: none;">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Help & Keyboard Shortcuts</h2>
                    <button class="modal-close" id="closeHelp">√ó</button>
                </div>
                <div class="help-content">
                    <div class="help-section">
                        <h3>üöÄ Getting Started</h3>
                        <ul>
                            <li>Click <strong>"Simplify Page"</strong> to make any webpage easier to read</li>
                            <li>Use the <strong>slider</strong> to adjust simplification level</li>
                            <li>Try <strong>"Split View"</strong> to compare original vs simplified</li>
                            <li>Use <strong>"Heatmap"</strong> to see complexity hotspots</li>
                        </ul>
                    </div>
                    
                    <div class="help-section">
                        <h3>‚å®Ô∏è Keyboard Shortcuts</h3>
                        <div class="shortcuts-grid">
                            <div class="shortcut-item">
                                <kbd>Alt + S</kbd>
                                <span>Toggle simplification</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Alt + R</kbd>
                                <span>Reset to original</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Alt + H</kbd>
                                <span>Toggle heatmap</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl + Click</kbd>
                                <span>Detailed comparison</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="help-section">
                        <h3>üéØ Pro Tips</h3>
                        <ul>
                            <li><strong>Batch Processing:</strong> Simplify multiple tabs at once</li>
                            <li><strong>Export:</strong> Save simplified content as PDF, HTML, or text</li>
                            <li><strong>Hover Tooltips:</strong> See original text and metrics</li>
                            <li><strong>Domain Intelligence:</strong> Automatic optimization for different content types</li>
                        </ul>
                    </div>
                    
                    <div class="help-section">
                        <h3>‚ôø Accessibility</h3>
                        <ul>
                            <li>Full keyboard navigation support</li>
                            <li>Screen reader announcements</li>
                            <li>High contrast mode compatible</li>
                            <li>Reduced motion support</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Learning Mode Modal -->
        <div class="learning-modal" id="learningModal" style="display: none;">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üéì Learning Mode</h2>
                    <button class="modal-close" id="closeLearning">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="learning-content">
                        <div class="learning-section">
                            <h3>üìö How Simplification Works</h3>
                            <div class="learning-steps">
                                <div class="step-item">
                                    <div class="step-number">1</div>
                                    <div class="step-content">
                                        <h4>Content Analysis</h4>
                                        <p>AI analyzes sentence structure, vocabulary complexity, and readability metrics</p>
                                    </div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">2</div>
                                    <div class="step-content">
                                        <h4>Complexity Scoring</h4>
                                        <p>Each section gets a 1-10 complexity score based on multiple factors</p>
                                    </div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">3</div>
                                    <div class="step-content">
                                        <h4>Smart Transformation</h4>
                                        <p>Text is rewritten using simpler words, shorter sentences, and clearer structure</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="learning-section">
                            <h3>üîç Live Example</h3>
                            <div class="example-container" id="exampleContainer">
                                <div class="example-original">
                                    <h4>Original (Complexity: 8/10)</h4>
                                    <p id="originalExample">The implementation of quantum computational algorithms necessitates the utilization of sophisticated mathematical frameworks and requires comprehensive understanding of quantum mechanical principles.</p>
                                </div>
                                <div class="example-simplified">
                                    <h4>Simplified (Complexity: 3/10)</h4>
                                    <p id="simplifiedExample">To use quantum computers, you need to understand math and quantum physics.</p>
                                </div>
                            </div>
                            <button class="example-btn" id="generateExample">üîÑ Try Another Example</button>
                        </div>
                        
                        <div class="learning-section">
                            <h3>üéØ Simplification Rules</h3>
                            <div class="rules-grid">
                                <div class="rule-item">
                                    <span class="rule-icon">üìù</span>
                                    <div class="rule-content">
                                        <h4>Shorter Sentences</h4>
                                        <p>Break long sentences into smaller, digestible parts</p>
                                    </div>
                                </div>
                                <div class="rule-item">
                                    <span class="rule-icon">üí¨</span>
                                    <div class="rule-content">
                                        <h4>Common Words</h4>
                                        <p>Replace complex terms with everyday language</p>
                                    </div>
                                </div>
                                <div class="rule-item">
                                    <span class="rule-icon">üéØ</span>
                                    <div class="rule-content">
                                        <h4>Active Voice</h4>
                                        <p>Convert passive voice to active for clarity</p>
                                    </div>
                                </div>
                                <div class="rule-item">
                                    <span class="rule-icon">üìã</span>
                                    <div class="rule-content">
                                        <h4>Better Structure</h4>
                                        <p>Use bullet points and clear headings</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="learning-section">
                            <h3>üìä Your Progress</h3>
                            <div class="progress-stats" id="learningProgress">
                                <div class="progress-item">
                                    <span class="progress-value" id="conceptsLearned">0</span>
                                    <span class="progress-label">Concepts Learned</span>
                                </div>
                                <div class="progress-item">
                                    <span class="progress-value" id="examplesViewed">0</span>
                                    <span class="progress-label">Examples Viewed</span>
                                </div>
                                <div class="progress-item">
                                    <span class="progress-value" id="learningTime">0</span>
                                    <span class="progress-label">Minutes Learning</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Setup Modal -->
        <div class="profile-modal" id="profileModal" style="display: none;">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üë§ User Profile Setup</h2>
                    <button class="modal-close" id="closeProfile">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="profile-content">
                        <div class="profile-section">
                            <h3>üìä Experience Level</h3>
                            <div class="experience-options">
                                <label class="option-card">
                                    <input type="radio" name="experience" value="beginner">
                                    <div class="card-content">
                                        <span class="card-icon">üå±</span>
                                        <h4>Beginner</h4>
                                        <p>I prefer simple explanations and basic language</p>
                                    </div>
                                </label>
                                <label class="option-card">
                                    <input type="radio" name="experience" value="intermediate" checked>
                                    <div class="card-content">
                                        <span class="card-icon">üìö</span>
                                        <h4>Intermediate</h4>
                                        <p>I can handle moderate complexity with some technical terms</p>
                                    </div>
                                </label>
                                <label class="option-card">
                                    <input type="radio" name="experience" value="expert">
                                    <div class="card-content">
                                        <span class="card-icon">üéì</span>
                                        <h4>Expert</h4>
                                        <p>I prefer detailed explanations with technical accuracy</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <div class="profile-section">
                            <h3>üéØ Simplification Preferences</h3>
                            <div class="preference-grid">
                                <div class="preference-item">
                                    <label>Technical Terms:</label>
                                    <select id="technicalTerms">
                                        <option value="simplify">Always simplify</option>
                                        <option value="explain">Explain when used</option>
                                        <option value="keep">Keep original</option>
                                    </select>
                                </div>
                                <div class="preference-item">
                                    <label>Sentence Length:</label>
                                    <select id="sentenceLength">
                                        <option value="short">Prefer short</option>
                                        <option value="medium">Medium length</option>
                                        <option value="long">Keep original</option>
                                    </select>
                                </div>
                                <div class="preference-item">
                                    <label>Explanation Depth:</label>
                                    <select id="explanationDepth">
                                        <option value="basic">Basic overview</option>
                                        <option value="moderate">Moderate detail</option>
                                        <option value="detailed">Full detail</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="profile-section">
                            <h3>üìà Domain Familiarity</h3>
                            <div class="domain-stats" id="domainStats">
                                <div class="stats-grid">
                                    <div class="stat-card">
                                        <span class="stat-icon">üéì</span>
                                        <div class="stat-info">
                                            <span class="stat-label">Academic</span>
                                            <span class="stat-level" id="academicLevel">Novice</span>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <span class="stat-icon">‚öñÔ∏è</span>
                                        <div class="stat-info">
                                            <span class="stat-label">Legal</span>
                                            <span class="stat-level" id="legalLevel">Novice</span>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <span class="stat-icon">üíª</span>
                                        <div class="stat-info">
                                            <span class="stat-label">Technical</span>
                                            <span class="stat-level" id="technicalLevel">Novice</span>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <span class="stat-icon">üè•</span>
                                        <div class="stat-info">
                                            <span class="stat-label">Medical</span>
                                            <span class="stat-level" id="medicalLevel">Novice</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="profile-actions">
                            <button class="save-profile-btn" id="saveProfile">üíæ Save Profile</button>
                            <button class="reset-profile-btn" id="resetProfile">üîÑ Reset to Defaults</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html>
